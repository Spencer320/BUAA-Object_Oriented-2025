# 面向对象第七次实验指导书

## 实验仓库

> 公共信息发布： [exp_7](http://gitlab.oo.buaa.edu.cn/2025_oo_public/practice/practice_7)。

> 个人仓库：`oo_homework_2025/homework_2025_你的学号_exp_7`。

> 请同学们作答完成后，将 json 文件**提交到个人仓库**，并将 json 文件内容**填入内容提交区**，再在本页面下方选择对应的 `commit`，最后**点击最下方的按钮进行提交**。详细的提交过程请参见**_提交格式_**章节。

## 实验概要与实验目的

老师让小亮模拟简单的快递站，要求他**设计**并画好UML图并用程序实现，请你与小亮一起思考并完成这个任务，回答下列问题。

通过本实验你需要

- 掌握UML图的基本画法
- 认识程序设计的重要性

**本次实验注重理解，不存在程序评测，只需要提交 answer.json ，不需要提交代码，无需过于在意运行结果**

## 题目背景

快递站里有三种员工，前台Receptionist、管理员Dispatcher和快递员Courier，前台负责接待顾客，响应顾客的请求；管理员负责管理快递仓库信息并调度快递员；快递员接受管理员调度执行送货任务。对于每一位员工，我们需要记录其**工号workerId**并提供查询接口。**为方便入手，先假设三种员工各只有一位，初始只有一间空闲的仓库，仓库的容量为2**。

快递站有以下三项服务/操作需要模拟实现：

#### 寄件请求（指令格式：`send packageId`）

顾客向**前台**提出寄件申请，**前台**通知**管理员**处理寄件，管理员安排**快递员**寄件。（**忽略送货时间**，**假设快递员立刻送完并归位**）

#### 取件请求（指令格式：`take packageId`）

顾客向**前台**提出取件申请，**前台**向**管理员**查询仓库是否存在该包裹，若有则取出包裹并告知**前台**，若无则告知**前台**包裹未找到。

#### 收件入库（指令格式：`receive packageId`）

快递站收到快递，**前台**向**管理员**查询仓库是否有空位，若有则接收包裹并告知**前台**，若无则告知**前台**仓库已满。

输入`show`会用字符画的方式显示仓库状态，方便调试

输入以`end`结束，表示结束模拟

## 输入输出说明

注意，本实验旨在理解UML画图以及程序设计，输入输出仅作辅助理解作用，且已在程序中写好，**不存在**各种形式上对输入输出的考察，且我们可以认为输入逻辑上是合理的，例如包裹id不会重复导致歧义

输入：

```
send 1
receive 2
take 2
take 2
end
```

输出：

```
Dispatcher 2 : arrange courier to send package 1
Courier 3 : start sending package 1
Receptionist 1 : package 1 start delivery. Please wait patiently
Dispatcher 2 : receive package 2
Receptionist 1 : receive package 2 successfully
Dispatcher 2 : take package 2
Receptionist 1 : take package 2 successfully
Dispatcher 2 : package 2 not found.
Receptionist 1 : failed to take package 2
```

## 提交格式

注意到每一题有标注序号，根据在实验仓库中给出的 `answer.json` 模板，将答案填写完毕后保存在个人仓库的根目录的 `answer.json` 文件内，并在课程平台提交该 commit，**同时需要将作答内容全部写在内容提交区**。

```json
{
    "1": [
        "第一题第一空内容",
        "第一题第二空内容",
        "第一题第三空内容",
        "第一题第四空内容",
        "第一题第五空内容",
        "第一题第六空内容"
    ],
    "2": [
        "第二题第一空内容",
        "第二题第二空内容",
        "第二题第三空内容",
        "第二题第四空内容",
        "第二题第五空内容",
        "第二题第六空内容"
    ]
}
```

## 问题

1. “各种员工只有一位，这么简单何须先设计画出UML图呢？我直接就能写出来。”小亮没多想就完成了程序，但为了应付老师的要求，小亮决定根据程序来画UML图。根据小亮的程序，以下三种UML图中缺失的信息应该是什么？**（共6个空）**。

   代码请见/code/p1

   *tips：UML图与程序是对应的，请从程序中寻找答案，并体会UML图的作图标准；别忘了可见性*

   （一）程序UML类图

![图片描述](https://s21.ax1x.com/2025/05/15/pEjb8kq.png)

   （二）寄件流程的UML顺序图

![图片描述](https://s21.ax1x.com/2025/05/15/pEjbJhV.png)

   （三）仓库的状态图

![图片描述](http://api.oo.buaa.edu.cn/image/2025_05_20_18_14_26_01e0c5507d145de7b6ec641418ebc71184bcbe37)

2. 老师检查后微微一笑，让他继续升级，让快递站支持**多员工多仓库，工人送货需要时间，新增寄件指令与收件指令等待列表**。小亮傻眼了，之前贸然写出的程序显然难以进行后续的迭代升级，看来只能**重构**了。小亮这回知道设计的重要性了，他设计并画好了UML图，再开始编码。现在来考考你，根据小亮的UML图，代码中应该填写的内容是什么？**（共6个空）**

   具体说明如下：

   - 假设有**两名**快递员，初始有两间仓库。
   - **快递员**开始送货后处于working状态，**不得执行其他送货指令**，直到收到该快递员的return指令。

   代码请见/code/p2，要填写的内容已在代码中用 **TODO(1)-TODO(6)** 标出

   （一）程序UML类图

![图片描述](http://api.oo.buaa.edu.cn/image/2025_05_20_18_06_57_f42d7650aa0c30c072c43bd2ef25c61c5bc1bba8)

（二）寄件流程的UML顺序图

![图片描述](https://s21.ax1x.com/2025/05/15/pEjbUcF.png)

（三）快递员的状态图

![图片描述](http://api.oo.buaa.edu.cn/image/2025_05_20_22_01_21_0ffe75a28fadd933f63a2a32bc920bdff9b4508e)

### 结语：你是否也有过没认真设计导致必须从头再来的情况呢？希望同学们在往后的学习工作中**先做好设计，画好UML图再实现具体代码**，做到真正的高效coding。